
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Fitness Hub - Stable Version</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/components.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div id="app">
        <!-- Main Navigation -->
        <header class="app-header">
            <h1 class="app-title">üèãÔ∏è Fitness Hub</h1>
            <button id="settings-btn" class="icon-btn">‚öôÔ∏è</button>
        </header>

        <!-- Module Cards -->
        <div id="main-screen" class="screen active">
            <div class="modules-grid">
                <div class="module-card" data-module="workout">
                    <div class="module-icon">üí™</div>
                    <h3 class="module-title">–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</h3>
                    <p class="module-desc">–°–æ–∑–¥–∞–≤–∞–π –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π —Å–≤–æ–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</p>
                    <div class="module-stats">
                        <span id="draft-indicator" class="draft-badge" style="display: none;">–ï—Å—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫</span>
                        <span id="total-workouts">0 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</span>
                    </div>
                </div>

                <div class="module-card" data-module="history">
                    <div class="module-icon">üìÖ</div>
                    <h3 class="module-title">–ò—Å—Ç–æ—Ä–∏—è</h3>
                    <p class="module-desc">–ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π –ø—Ä–æ—à–ª—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</p>
                    <div class="module-stats">
                        <span id="total-history">0 –∑–∞–ø–∏—Å–µ–π</span>
                    </div>
                </div>

                <div class="module-card" data-module="stats">
                    <div class="module-icon">üìä</div>
                    <h3 class="module-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                    <p class="module-desc">–ê–Ω–∞–ª–∏–∑–∏—Ä—É–π —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å</p>
                    <div class="module-stats">
                        <span id="total-tonnage">0 –∫–≥</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Workout Module -->
        <div id="workout-screen" class="screen">
            <div class="screen-header">
                <button class="back-btn">‚Üê –ù–∞–∑–∞–¥</button>
                <h2 class="screen-title">–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</h2>
                <button id="workout-menu-btn" class="icon-btn">‚ãÆ</button>
            </div>

            <div class="workout-content">
                <!-- Date Selector -->
                <div class="date-selector">
                    <button id="date-prev" class="date-nav-btn">‚Äπ</button>
                    <div class="date-display">
                        <span id="workout-date">–°–µ–≥–æ–¥–Ω—è</span>
                        <small id="workout-date-full"></small>
                    </div>
                    <button id="date-next" class="date-nav-btn">‚Ä∫</button>
                </div>

                <!-- Workout Stats -->
                <div class="workout-stats">
                    <div class="stat-item">
                        <span class="stat-value" id="workout-tonnage">0</span>
                        <span class="stat-label">–∫–≥</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="workout-reps">0</span>
                        <span class="stat-label">–ø–æ–≤—Ç–æ—Ä–æ–≤</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="workout-max-weight">0</span>
                        <span class="stat-label">–º–∞–∫—Å –≤–µ—Å</span>
                    </div>
                </div>

                <!-- Add Exercise Section -->
                <div id="add-exercise-section" class="add-exercise-section">
                    <div class="add-exercise-header">
                        <h3 class="add-exercise-title">‚ûï –î–æ–±–∞–≤–∏—Ç—å —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ</h3>
                    </div>
                    
                    <div class="add-exercise-form">
                        <form id="exercise-form">
                            <!-- Exercise Selection -->
                            <div class="form-group">
                                <label class="form-label">–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ</label>
                                <select id="exercise-select" name="exercise" class="form-select" required>
                                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ</option>
                                    <option value="–ñ–∏–º –ª–µ–∂–∞">–ñ–∏–º –ª–µ–∂–∞</option>
                                    <option value="–ü—Ä–∏—Å–µ–¥–∞–Ω–∏—è">–ü—Ä–∏—Å–µ–¥–∞–Ω–∏—è</option>
                                    <option value="–°—Ç–∞–Ω–æ–≤–∞—è —Ç—è–≥–∞">–°—Ç–∞–Ω–æ–≤–∞—è —Ç—è–≥–∞</option>
                                    <option value="–ñ–∏–º —Å—Ç–æ—è">–ñ–∏–º —Å—Ç–æ—è</option>
                                    <option value="–ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è">–ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è</option>
                                    <option value="–û—Ç–∂–∏–º–∞–Ω–∏—è">–û—Ç–∂–∏–º–∞–Ω–∏—è</option>
                                    <option value="–ñ–∏–º –≥–∞–Ω—Ç–µ–ª–µ–π">–ñ–∏–º –≥–∞–Ω—Ç–µ–ª–µ–π</option>
                                    <option value="–¢—è–≥–∞ —à—Ç–∞–Ω–≥–∏ –≤ –Ω–∞–∫–ª–æ–Ω–µ">–¢—è–≥–∞ —à—Ç–∞–Ω–≥–∏ –≤ –Ω–∞–∫–ª–æ–Ω–µ</option>
                                    <option value="–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π –∂–∏–º">–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π –∂–∏–º</option>
                                    <option value="–ü–æ–¥—ä–µ–º –Ω–∞ –±–∏—Ü–µ–ø—Å">–ü–æ–¥—ä–µ–º –Ω–∞ –±–∏—Ü–µ–ø—Å</option>
                                </select>
                            </div>
                            
                            <!-- Weight Input -->
                            <div class="form-group">
                                <label class="form-label">–í–µ—Å (–∫–≥)</label>
                                <input type="number" id="weight-input" name="weight" class="form-input" 
                                       min="0" max="500" step="0.5" placeholder="0">
                            </div>
                            
                            <!-- Reps Input -->
                            <div class="form-group">
                                <label class="form-label">–ü–æ–≤—Ç–æ—Ä–µ–Ω–∏—è</label>
                                <input type="number" id="reps-input" name="reps" class="form-input" 
                                       min="1" max="50" placeholder="0">
                            </div>
                            
                            <!-- Action Button -->
                            <div class="add-exercise-actions">
                                <button type="submit" id="add-exercise-btn" class="btn-primary">
                                    <span class="btn-icon">üí™</span>
                                    –î–æ–±–∞–≤–∏—Ç—å —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Exercises List -->
                <div id="exercises-list" class="exercises-list">
                    <div class="empty-state" id="empty-workout">
                        <div class="empty-icon">üí™</div>
                        <p>–¢–≤–æ–∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å</p>
                        <p class="empty-hint">–ò—Å–ø–æ–ª—å–∑—É–π —Ñ–æ—Ä–º—É –≤—ã—à–µ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è</p>
                    </div>
                </div>

                <div class="workout-actions">
                    <button id="save-workout-btn" class="btn btn-success">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button id="clear-workout-btn" class="btn btn-danger">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- History Module -->
        <div id="history-screen" class="screen">
            <div class="screen-header">
                <button class="back-btn">‚Üê –ù–∞–∑–∞–¥</button>
                <h2 class="screen-title">–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</h2>
            </div>

            <div class="history-content">
                <div id="history-list" class="history-list">
                    <div class="empty-state" id="empty-history">
                        <div class="empty-icon">üìÖ</div>
                        <p>–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –ø—É—Å—Ç–∞</p>
                        <p class="empty-hint">–°–æ–∑–¥–∞–π —Å–≤–æ—é –ø–µ—Ä–≤—É—é —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Statistics Module -->
        <div id="stats-screen" class="screen">
            <div class="screen-header">
                <button class="back-btn">‚Üê –ù–∞–∑–∞–¥</button>
                <h2 class="screen-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
            </div>

            <div class="stats-content">
                <div class="stats-overview">
                    <div class="stat-card">
                        <div class="stat-value" id="stats-total-workouts">0</div>
                        <div class="stat-label">–¢—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stats-total-tonnage">0</div>
                        <div class="stat-label">–û–±—â–∏–π —Ç–æ–Ω–Ω–∞–∂ (–∫–≥)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stats-avg-tonnage">0</div>
                        <div class="stat-label">–°—Ä–µ–¥–Ω–∏–π —Ç–æ–Ω–Ω–∞–∂</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stats-best-day">-</div>
                        <div class="stat-label">–õ—É—á—à–∏–π –¥–µ–Ω—å</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>
    </div>

    <!-- Scripts - Load with error protection -->
    <script>
        // Error handler for script loading
        window.addEventListener('error', function(e) {
            console.error('Script loading error:', e);
            // Continue with minimal functionality
        });
    </script>
    
    <script src="js/config.js" onerror="console.warn('Config failed to load')"></script>
    <script src="js/storage.js" onerror="console.warn('Storage failed to load')"></script>
    <script src="js/utils.js" onerror="console.warn('Utils failed to load')"></script>
    <script src="js/components.js" onerror="console.warn('Components failed to load')"></script>
    <script src="js/workout.js" onerror="console.warn('Workout module failed to load')"></script>
    <script src="js/history.js" onerror="console.warn('History module failed to load')"></script>
    <script src="js/statistics.js" onerror="console.warn('Statistics module failed to load')"></script>
    <script src="js/app-fixed.js"></script>
</body>
</html>
